<h4><b>E. Designing Modularity with Nested Templates</b></h4>
<p>To deploy your solution, you can use either a single  template or a main template with multiple nested templates. Nested templates  are common for more advanced scenarios. Nested templates contain the following  advantages:</p>
<ul>
  <li>Provides benefits in terms of testing, reuse,  and readability.</li>
  <li>Can reuse nested templates with other main  templates of different quickstart solutions.</li>
</ul>
<p>When you decide to decompose your template design into  multiple nested templates, the following guidelines helps in standardize the  design. The recommended design consists of the following templates:</p>
<ul>
  <li><strong>Main  template</strong>&nbsp;(azuredeploy.json): Used  for the input parameters.</li>
  <li><strong>Shared  resources template</strong>: Deploys the shared resources that all other  resources use (for example, virtual network, availability sets). The expression <strong>dependsOn</strong> enforces that this  template is deployed before the other templates.</li>
  <li><strong>Optional  resources template</strong><strong>: </strong>Conditionally deploys  resources based on a parameter (for example, a jumpbox)<strong></strong></li>
  <li><strong>Member resources  templates</strong>:  Each instance type within an application tier has its own configuration. Within  a tier, different instance types can be defined (such as, first instance  creates a cluster, additional instances are added to the existing cluster).  Each instance type has its own deployment template.</li>
  <li><strong>Scripts</strong>:  Widely reusable scripts are applicable for each instance type (for example,  initialize and format additional disks). Custom scripts are created for  specific customization purpose are different per instance type.</li>
  <img src="Images/Images/2.png"  height="400" width="700"/><br/>
</ul>
<p>You can follow below articles to learn more about passing  values and sharing state between templates : </p>
<ul>
  <li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/best-practices-resource-manager-state">https://docs.microsoft.com/en-us/azure/azure-resource-manager/best-practices-resource-manager-state</a> </li>
  <li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-linked-templates">https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-linked-templates</a> </li>
</ul>

